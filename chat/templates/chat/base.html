<!DOCTYPE html>
<html lang="en" class="ui">
<head>
  <meta charset="utf-8">
  <title>Cyvance Chat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root{
      --bg: #0b1020;
      --panel: #0f172a;
      --panel-2: #111827;
      --text: #e5e7eb;
      --muted: #9aa4b2;
      --border: #263042;
      --primary: #3b82f6;
      --primary-600: #2563eb;
      --accent: #22d3ee;
      --success: #10b981;
      --danger: #ef4444;
      --code-bg: #0b1220;
      --chip-bg: #1f2937;
      --chip-border: #374151;
      --shadow: 0 10px 25px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
      --gap: 16px;
    }
    @media (prefers-color-scheme: light) {
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --panel-2: #ffffff;
        --text: #0f172a;
        --muted: #6b7280;
        --border: #e5e7eb;
        --primary: #2563eb;
        --primary-600: #1d4ed8;
        --accent: #0ea5e9;
        --success: #059669;
        --danger: #dc2626;
        --code-bg: #f3f4f6;
        --chip-bg: #f3f4f6;
        --chip-border: #e5e7eb;
        --shadow: 0 10px 25px rgba(2,6,23,.10);
      }
    }

    *{ box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: linear-gradient(160deg, var(--bg), #060913 60%);
      color: var(--text);
    }

    a { color: inherit; text-decoration: none; }

    header {
      position: sticky; top: 0; z-index: 50;
      backdrop-filter: saturate(1.2) blur(8px);
      background: color-mix(in srgb, var(--panel-2) 75%, transparent);
      border-bottom: 1px solid var(--border);
    }
    .nav {
      max-width: 1050px; margin: 0 auto; padding: 14px 18px;
      display: flex; align-items: center; justify-content: space-between;
    }
    .brand {
      display: inline-flex; align-items: center; gap: 10px; font-weight: 700;
      letter-spacing: 0.3px;
    }
    .brand-badge {
      width: 34px; height: 34px; border-radius: 9px;
      background: radial-gradient(120px 120px at -30% -20%, var(--accent), transparent 60%), linear-gradient(180deg, var(--primary), var(--primary-600));
      box-shadow: 0 6px 18px rgba(37,99,235,.35), inset 0 0 0 1px rgba(255,255,255,.2);
    }
    .brand-title { font-size: 18px; }

    .container { max-width: 1050px; margin: 0 auto; padding: 22px 18px 32px; }

    .grid { display: grid; grid-template-columns: 1.2fr 1fr; gap: 18px; }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    .card {
      background: color-mix(in srgb, var(--panel) 92%, transparent);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .card-body { padding: 18px; }
    .card-head { padding: 16px 18px; border-bottom: 1px solid var(--border); display:flex; align-items:center; justify-content: space-between; gap: 12px; }
    .muted { color: var(--muted); }
    .tag {
      display:inline-block; padding: 4px 8px; border-radius: 999px;
      background: var(--chip-bg); border: 1px solid var(--chip-border); color: var(--muted); font-size: 12px;
    }
    .pill {
      display:inline-flex; align-items:center; gap:8px; padding:6px 10px;
      border:1px solid var(--border); border-radius: 999px; color: var(--muted); font-size: 13px;
      background: color-mix(in srgb, var(--panel) 85%, transparent);
    }
    .btn {
      appearance: none; border: none; outline: none; cursor: pointer;
      background: linear-gradient(180deg, var(--primary), var(--primary-600));
      color: white; padding: 10px 14px; border-radius: 10px; font-weight: 600;
      box-shadow: 0 8px 18px rgba(37,99,235,.35);
      transition: transform .05s ease, box-shadow .15s ease, opacity .2s ease;
    }
    .btn:active{ transform: translateY(1px); box-shadow: 0 5px 14px rgba(37,99,235,.25); }
    .btn.secondary{
      background: color-mix(in srgb, var(--panel-2) 92%, transparent);
      color: var(--text); border: 1px solid var(--border); box-shadow: none;
    }
    .btn:disabled { opacity:.65; cursor:not-allowed; }

    .row { display:flex; gap: 16px; align-items: stretch; }
    .col { flex:1; min-width: 0; }
    @media (max-width: 980px){ .row{ flex-direction: column; } }

    input, textarea, .file {
      width: 100%; background: color-mix(in srgb, var(--code-bg) 86%, transparent);
      color: var(--text); border: 1px solid var(--border); border-radius: 10px; padding: 10px 12px;
      font-size: 14px;
    }
    textarea{ min-height: 90px; }
    label { display:block; font-size:12px; color: var(--muted); margin: 8px 2px; }

    .messages {
      height: min(60vh, 560px); overflow: auto; padding: 14px 14px 2px;
      background: color-mix(in srgb, var(--panel-2) 90%, transparent);
      border-top: 1px solid var(--border);
    }
    .bubble {
      background: color-mix(in srgb, var(--code-bg) 92%, transparent);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 12px; margin: 0 0 12px 0;
    }
    .meta { display:flex; gap:8px; align-items:center; font-size: 12px; color: var(--muted); margin-bottom: 6px; }
    .meta .dot{ width:6px; height:6px; border-radius:999px; background: var(--accent); box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent) 25%, transparent); }

    pre { background: var(--code-bg); padding: 10px; border-radius: 10px; overflow:auto; border: 1px solid var(--border); }
    code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; font-size: 13px; }
    img.msg { max-width: 100%; border-radius: 10px; border:1px solid var(--border); display:block; }

    .inline { display:flex; gap: 10px; align-items:center; }
    .stack { display:flex; flex-direction: column; gap:10px; }

    .footer-note{ text-align:center; color: var(--muted); font-size: 12px; padding: 14px; }

  /* Copy button styles for code blocks */
  .code-actions {
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 6px 0 8px;
  }
  .btn.copy {
    background: color-mix(in srgb, var(--panel-2) 92%, transparent);
    color: var(--text);
    border: 1px solid var(--border);
    box-shadow: none;
    padding: 6px 10px;
    border-radius: 8px;
    font-size: 12px;
  }
  .btn.copy:active { transform: translateY(1px); }
  .copy-done {
    color: var(--muted);
    font-size: 12px;
  }

  /* Optional: countdown emphasis */
  #expiryCountdown { font-weight: 600; }

  </style>
</head>
<body>
  <header>
    <div class="nav">
      <div class="brand">
        <div class="brand-badge"></div>
        <div class="brand-title">Cyvance Chat</div>
      </div>
      <a class="btn secondary" href="/">New Room</a>
    </div>
  </header>

  <div class="container">
    {% block content %}{% endblock %}
    <div class="footer-note">Rooms autoâ€‘expire after inactivity. No accounts. Be respectful.</div>
  </div>

  <script src="/static/chat/app.js"></script>
</body>
</html>
